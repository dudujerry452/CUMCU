$$

dp(p, d, l) = max
\begin{cases}
dp(p_f, d-1, l+2*c_{d-1}), p_f\neq p, p_f不为沙暴 \\
dp(p, d, l-\Delta l) + price(\Delta l), p为村庄\\
dp(p, d-1, l+c_{d-1}) \\ 
dp(p, d-1, l+3*c_{d-1}) - profit, p为矿山
\end{cases} \\
answer\ is \ dp(end, 30, \{0,0\})
$$






$$
设天气为晴朗的概率为p \\
一共需要走三步. 若晴朗, 则走; \\
若高温, 则有两种选择, 留一回合不走, 下回合晴朗再走; 直接走.  \\
直接走: c = 270 \\
留一回合: c(t) = 235*p + 
\sum_{i=1}^{t}(135*i+110)*(1-p)^i*p + (135*t+270)*(1-p)^t, ~~~t为剩余的回合数 \\
c(t) = p(235 + 135*(\sum_{i=1}^ti(1-p)^i) + 110*(\sum_{i=1}^t(1-p)^i)) \\
令p表示高温, 则 \\
c(t) = (1-p)(235 + 135*(\sum_{i=1}^tip^i) + 110*(\sum_{i=1}^tp^i)) \\
 = (1-p)(235 + 135*(\dfrac{\sum_{i=1}^tp^i - p^{t+1}}{1-p}) + 110*\sum_{i=1}^tp^i) \\ 
 = (1-p)(235 + (\dfrac{245-110p}{1-p})\sum_{i=1}^tp^i - 135*\dfrac{p^{t+1}}{1-p}) \\
  = (1-p)(235 + \dfrac{245p-110p^2-245p^{t+1}+110p^{t+2}-135p^{t+1}+135p^{t+2}}{(1-p)^2}) \\
 = (1-p)(235 + \dfrac{245p-110p^2-380p^{t+1}+245p^{t+2}}{(1-p)^2})
$$

$$
天气为高温的概率为p \\ 
则c >= 235*(1-p) + 370*p = 235 + 135p\\
同时若不走则为c = 270 >= 235 + 135p\\
p <= 35/135=0.26 \\
p <= 0.26
$$




$$
v(s) = max_a\{\sum P_{ss'}^a(R(s,s'|a) + \gamma v(s'))\} \\
更改  \\ 
q(s,a) = R(s,a) + \gamma\sum_{s'}P_{ss'}^amax_{a'}q(s',a')
$$



$$
Nash均衡: \\
u_1(a_1^*, a_2^*) > u_1(a_1, a_2^*) \\
u_2(a_1^*, a_2^*) > u_2(a_1^*, a_2)
$$
